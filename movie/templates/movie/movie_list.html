{% extends 'movie/layouts/base.html' %}

{% load static %}

{% block scripts %}
<script type="text/javascript" src="{% static 'movie/js/movie.js' %}"></script>
{% endblock %}

{% block content %}
<div class="container">
	<div>
		<div>
			<h1 style="display: inline;">Movie Bucket</h1>
		
			<a href="{% url 'movie:add' %}" class="btn btn-primary pull-right">
				<span class="glyphicon glyphicon-plus"></span> Add
			</a>
		</div>
	</div>

	<table class="table table-bordered text-center">
		<thead>
			<tr>
				<th colspan="2" class='text-center'>Title</th>
				<th class='text-center'>Plot</th>
				<th colspan="3" class='text-center'>Actions</th>
			</tr>
		</thead>

		<tbody>
			{% for movie in object_list %}
			<tr>
				<td>
					<a href="{% url 'movie:detail' movie.id %}">{{ movie.title }}</a>
				</td>
				<td>
					<span class="glyphicon glyphicon-thumbs-up add-like" id="{{ movie.id }}"></span> | <span id="like-{{ movie.id }}">{{ movie.likes }}</span>
				</td>
				<td>
					{{ movie.plot }}
				</td>
				<td>
					<a href="{% url 'movie:detail' movie.id %}" class="btn btn-info">
						<span class="glyphicon glyphicon-play-circle"></span> View
					</a>
				</td>
				<td>
					<a href="{% url 'movie:update' movie.id %}" class="btn btn-warning">
						<span class="glyphicon glyphicon-pencil"></span> Edit
					</a>
				</td>
				<td>
					<button type="button" class="btn btn-danger" data-toggle="modal" data-target="#confirm-delete-modal-{{ movie.id }}">
						<span class="glyphicon glyphicon-trash"></span> Delete
					</button>
				</td>
			</tr>

			{% include 'movie/modals/confirm-delete-modal.html' %}

			{% empty %}
			<tr>
				<td>There are no movies stored in the database.</td>
			</tr>
			{% endfor %}
		</tbody>
	</table>
</div>

{% endblock %}

